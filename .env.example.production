# Crystal Admin CI/CD - Environment Configuration Example
# Copy this file to .env.production and fill in your actual values
# DO NOT commit files with secrets - they will be blocked by the pre-commit hook

# ============================================
# Environment Type
# ============================================
NODE_ENV=production
DEBUG=false

# ============================================
# Server Configuration
# ============================================
PORT=3001
HOST=0.0.0.0
FRONTEND_PORT=3000
FRONTEND_HOST=0.0.0.0

# ============================================
# Database Configuration
# ============================================
# PostgreSQL Example:
# DATABASE_URL=postgresql://user:password@host:5432/dbname

# MySQL Example:
# DATABASE_URL=mysql://user:password@host:3306/dbname

# SQLite Example (local development):
# DATABASE_URL=file:./db.sqlite3

DATABASE_URL=your_database_url_here

# ============================================
# Redis Configuration
# ============================================
# Local Redis
REDIS_URL=redis://localhost:6379

# Remote Redis
# REDIS_URL=redis://:password@redis-host:6379/0

# Redis Cluster
# REDIS_URL=redis-cluster://node1:6379,node2:6379,node3:6379

REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=5000

# ============================================
# Authentication & Security
# ============================================
JWT_SECRET=your_very_long_and_random_jwt_secret_here_min_32_chars
JWT_EXPIRY=24h
BCRYPT_ROUNDS=10

# Session Configuration
SESSION_SECRET=your_session_secret_here
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# CORS Configuration
CORS_ORIGIN=https://yourdomain.com
CORS_CREDENTIALS=true

# ============================================
# Supabase Configuration (Optional)
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ============================================
# Cloudinary Configuration (Optional)
# ============================================
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# ============================================
# Image Processing & AI Features
# ============================================
# Background Removal (rembg microservice)
REMBG_SERVICE_URL=http://rembg:5000
REMBG_API_KEY=optional_auth_key

# Face Crop & Detection
ENABLE_FACE_CROP=true
FACE_CROP_TIMEOUT=30000  # milliseconds

# Image Beautification
ENABLE_IMAGE_BEAUTIFY=true
IMAGE_BEAUTIFY_BRIGHTNESS=1.08
IMAGE_BEAUTIFY_CONTRAST=1.05
IMAGE_BEAUTIFY_COLOR=1.05
IMAGE_BEAUTIFY_SHARPNESS=1.1

# ============================================
# Email Configuration (Optional)
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM="Crystal Admin <noreply@yourdomain.com>"

# ============================================
# AWS S3 Configuration (Optional)
# ============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_S3_BUCKET=crystal-admin-uploads
AWS_S3_PUBLIC_URL=https://bucket.s3.amazonaws.com

# ============================================
# Frontend API Configuration
# ============================================
VITE_API_URL=https://api.yourdomain.com
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_KEY=your_supabase_anon_key_here

# ============================================
# Feature Flags
# ============================================
ENABLE_BACKGROUND_REMOVAL=true
ENABLE_FACE_CROP=true
ENABLE_IMAGE_BEAUTIFY=true
ENABLE_PDF_EXPORT=true
ENABLE_BATCH_PROCESSING=true
ENABLE_USER_REGISTRATION=false

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/crystal-admin/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=10

# ============================================
# Performance & Optimization
# ============================================
# Cache Configuration
CACHE_TTL=3600  # seconds
CACHE_REDIS_DB=1

# Rate Limiting
RATE_LIMIT_WINDOW=15  # minutes
RATE_LIMIT_MAX_REQUESTS=100

# Request Timeout
REQUEST_TIMEOUT=30000  # milliseconds
API_TIMEOUT=30000

# Image Optimization
MAX_IMAGE_SIZE=50000000  # bytes (50MB)
IMAGE_QUALITY=80
IMAGE_RESIZE_WIDTH=1920
IMAGE_RESIZE_HEIGHT=1440

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ============================================
# Database Connection Pool
# ============================================
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=900000  # 15 minutes

# ============================================
# Worker Configuration (Background Jobs)
# ============================================
WORKER_CONCURRENCY=4
WORKER_TIMEOUT=300000  # 5 minutes
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=5000  # milliseconds

# ============================================
# Monitoring & Observability
# ============================================
# New Relic (Optional)
NEW_RELIC_ENABLED=false
NEW_RELIC_LICENSE_KEY=your_license_key_here
NEW_RELIC_APP_NAME=crystal-admin-prod

# Sentry (Optional)
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-key@o123456.ingest.sentry.io/123456

# DataDog (Optional)
DATADOG_ENABLED=false
DATADOG_API_KEY=your_datadog_api_key

# ============================================
# Docker & Container Configuration
# ============================================
# These are typically set by docker-compose
COMPOSE_PROJECT_NAME=crystal-admin
COMPOSE_PROFILES=

# ============================================
# Development & Debugging
# ============================================
# Only set these in development, not production!
DEBUG_MODE=false
VERBOSE_LOGGING=false
ALLOW_TEST_ENDPOINTS=false

# ============================================
# Security Headers
# ============================================
ENABLE_SECURITY_HEADERS=true
CSP_POLICY="default-src 'self'"
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block

# ============================================
# API Documentation
# ============================================
ENABLE_API_DOCS=true
ENABLE_SWAGGER=true
API_DOCS_PATH=/api/docs

# ============================================
# SSL/TLS Configuration
# ============================================
# If using reverse proxy with SSL, set:
TRUST_PROXY=true
PROTOCOL=https

# For direct SSL:
# SSL_CERT_PATH=/etc/ssl/certs/cert.pem
# SSL_KEY_PATH=/etc/ssl/private/key.pem
